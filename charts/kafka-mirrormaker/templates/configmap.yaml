apiVersion: v1
kind: ConfigMap
metadata:
  name: kafka-mirrormaker-config
{{- include "base.meta.labels" . | indent 2}}
data:
  consumer.properties: |
    bootstrap.servers = kafka-{{ $.Values.config.mm.source }}.external-services.svc.cluster.local:9093
    group.id = mirrormaker-{{ $.Values.config.mm.source }}-to-{{ $.Values.config.mm.target }}
    {{- range $k, $v := $.Values.config.mm.consumer }}
    {{ $k }} = {{ $v }}
    {{- end }}
  producer.properties: |
    bootstrap.servers = kafka-{{ $.Values.config.mm.target }}.external-services.svc.cluster.local:9093
    client.id = mirrormaker-{{ $.Values.config.mm.source }}-to-{{ $.Values.config.mm.target }}-producer
    {{- range $k, $v := $.Values.config.mm.producer }}
    {{ $k }} = {{ $v }}
    {{- end }}
  log4j.properties: |
    log4j.rootLogger=INFO, stdout
    log4j.appender.stdout=org.apache.log4j.ConsoleAppender
    log4j.appender.stdout.target=System.out
    log4j.appender.stdout.layout=org.apache.log4j.PatternLayout
    log4j.appender.stdout.layout.ConversionPattern=%d{ISO8601} [%t] %-5p %c:%L - %m%n
