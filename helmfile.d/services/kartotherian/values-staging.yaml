resources:
  replicas: 1
  postgres:
    max_connections: 5

# Temporarily we will use envoy as a L4 tcp proxy until envoy's
# Postgres proxy filter is production ready
# https://www.envoyproxy.io/docs/envoy/latest/configuration/listeners/network_filters/postgres_proxy_filter#config-network-filters-postgres-proxy
tcp_services_proxy:
  maps_postgres:
    upstreams:
      # read replicas (the master node is left out on purpose to deal with data imports)
      - address: maps2012.codfw.wmnet
        port: 5432
      - address: maps2013.codfw.wmnet
        port: 5432
      - address: maps2014.codfw.wmnet
        port: 5432

external_services:
  postgresql: [maps-bookworm-read-replicas-codfw]

mesh:
  certmanager:
    extraFQDNs:
      - staging.svc.eqiad.wmnet
      - staging.svc.codfw.wmnet
